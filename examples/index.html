<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta content="IE=edge" http-equiv="X-UA-Compatible">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <title>Usage Example</title>
    </head>
    <body>
        <button id="getPostsBtn" type="button">
            Get Posts
        </button>

        <button id="loginBtn" type="button">
            Login
        </button>

        <button id="updateUserBtn" type="button">
            Update user
        </button>

        <button id="deleteUserBtn" type="button">
            Delete user
        </button>
        <hr>

        <fieldset disabled>
            <legend>Request Parameters :</legend>
            <p id="ajaxRequestParams"></p>
        </fieldset>
        <fieldset disabled>
            <legend>Raw response :</legend>
            <p id="consoleOutput"></p>
        </fieldset>

        <script crossorigin="anonymous"
                integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
                src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <script>
            $(() => {
                const requests = {

                    get: () => $.get('./ajax_handler.php', {'handler': 'posts'}, function (data) {
                        $.log(this.url, data);
                    }),

                    post: () => $.post('./ajax_handler.php', {
                        'handler': 'login',
                        'username': 'foo',
                        'password': 'bar'
                    }, function (data) {
                        $.log(this.data, data);
                    }),

                    put: () => $.ajax({
                        url: './ajax_handler.php',
                        type: 'PUT',
                        data: {
                            'handler': 'update-user',
                            'userID': '1112',
                            'email': 'user@user.com',
                            'nickname': 'foo',
                        },
                        success: function (data) {
                            $.log(this.data, data);
                        },
                    }),

                    delete: () => $.ajax({
                        url: './ajax_handler.php',
                        type: 'DELETE',
                        data: {
                            'handler': 'delete-user',
                            'userID': '1234',
                        },
                        success: function (data) {
                            $.log(this.data, data);
                        },
                    }),
                };

                $.log = (request, data) => {
                    $('#ajaxRequestParams').text(request);
                    $('#consoleOutput').text(data);
                };

                $('#getPostsBtn').click(requests.get);
                $('#loginBtn').click(requests.post);
                $('#updateUserBtn').click(requests.put);
                $('#deleteUserBtn').click(requests.delete);
            });
        </script>
    </body>
</html>
